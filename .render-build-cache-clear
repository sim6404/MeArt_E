# Render Build Cache Clear - v1.0.33
# Docker 빌드 최적화: npm lock 동기화 및 multistage 빌드 구현
# 2024-12-19 17:30:00

Docker 빌드 중 발생하는 npm lock 파일 동기화 문제를 근본적으로 해결했습니다:

1. 의존성 정리:
   - package.json에서 정확한 버전 고정 (범위 대신 고정 버전)
   - multer 2.0.1로 업그레이드 (보안 취약점 해결)
   - 필수 패키지만 포함하여 빌드 크기 최적화

2. lock 파일 동기화:
   - 기존 node_modules와 package-lock.json 삭제
   - npm install --package-lock-only로 lock 재생성
   - npm ci로 검증 완료

3. Dockerfile 최신화:
   - multistage 빌드 패턴 적용
   - deps stage에서 lock 기반 설치
   - --omit=dev 플래그 사용 (구식 --only=production 제거)
   - 캐시 최적화 및 빌드 속도 향상

4. CI 최적화:
   - .npmrc 파일 추가 (fund=false, audit=false, progress=false)
   - 불필요한 경고 및 출력 제거
   - 빌드 재현성 보장

5. 검증 완료:
   - npm ci 로컬 실행 성공
   - package-lock.json 동기화 완료
   - 의존성 버전 고정으로 빌드 안정성 향상