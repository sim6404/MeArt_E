# Render Build Cache Clear - v1.0.44
# npm 경고 해결 및 환경 동기화: 근본적인 배포 문제 해결
# 2024-12-19 23:00:00 - Render 배포 강제 트리거

npm 경고와 환경 불일치 문제를 근본적으로 해결했습니다:

1. Node/npm 버전 고정:
   - .nvmrc 생성: Node.js 20.19.4 고정
   - package.json engines: node 20.19.4 명시
   - packageManager: npm@10 추가
   - Render Node 20 환경과 완전 일치

2. .npmrc 정리:
   - 구식 only=production 제거
   - omit=dev로 정상화
   - engine-strict=true 추가
   - save-exact=true로 버전 고정
   - 사설 레지스트리 토큰 지원

3. lockfile 동기화 자동화:
   - scripts/lock-sync.mjs 생성
   - npm run lock:sync 스크립트 추가
   - package-lock.json 불일치 자동 해결
   - 의존성 설치 검증 자동화

4. Dockerfile 멀티스테이지 최적화:
   - Node.js 20.19.4-alpine 사용
   - deps 스테이지에서 npm ci --omit=dev
   - runner 스테이지에서 의존성 복사
   - 프로덕션 환경 최적화

5. render.yaml 빌드 명령 통일:
   - buildCommand: npm ci --omit=dev && npm run build
   - startCommand: npm run start
   - 환경별 설치 커맨드 통일

6. 해결된 문제들:
   - npm warn config only 경고 완전 제거
   - dev 의존성 제외 방식 통일
   - lockfile 불일치 자동 해결
   - Node/npm 버전 환경 편차 해결

이제 npm 경고 없이 안정적인 배포가 가능합니다!